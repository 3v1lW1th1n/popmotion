!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e.pose={})}(this,function(e){"use strict";var t=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e};function r(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&(r[n[o]]=e[n[o]])}return r}var n="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function o(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function a(e,t){return e(t={exports:{}},t.exports),t.exports}var i=a(function(e,t){var r=n&&n.__rest||function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&(r[n[o]]=e[n[o]])}return r};Object.defineProperty(t,"__esModule",{value:!0}),t.getPoseValues=function(e){e.transition,e.delay,e.delayChildren,e.staggerChildren,e.staggerDirection,e.afterChildren,e.beforeChildren,e.preTransition;return r(e,["transition","delay","delayChildren","staggerChildren","staggerDirection","afterChildren","beforeChildren","preTransition"])},t.selectPoses=function(e){e.label,e.props,e.values,e.parentValues,e.ancestorValues,e.onChange,e.passive,e.initialPose;return r(e,["label","props","values","parentValues","ancestorValues","onChange","passive","initialPose"])},t.selectAllValues=function(e,t){var r={};return e.forEach(function(e,n){return r[n]=t(e)}),r}});o(i);i.getPoseValues,i.selectPoses,i.selectAllValues;var u=a(function(e,t){var r=n&&n.__assign||Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e};Object.defineProperty(t,"__esModule",{value:!0}),t.resolveProp=function(e,t){return"function"==typeof e?e(t):e};var o=function(e,r,n,o){return e&&void 0!==e[r]?t.resolveProp(e[r],o):n};t.default=function(e){return function(n,a){void 0===a&&(a={});var u=e.state,s=e.poses,c=e.startAction,f=e.stopAction,l=e.getInstantTransition,p=e.addActionDelay,d=e.getTransitionProps,v=e.resolveTarget,h=e.transformPose,g=u.children,m=u.values,y=u.props,b=u.activeActions,O=u.activePoses,P=a.delay,w=void 0===P?0:P,_=g.size,M=s[n],j=r({},y,a),x=function(){return _?function(e,t,n,a){var i=[],u=o(n,"delayChildren",0,a),s=o(n,"staggerChildren",0,a),c=o(n,"staggerDirection",1,a),f=(e.size-1)*s,l=1===c?function(e){return e*s}:function(e){return f-e*s};return Array.from(e).forEach(function(e,n){i.push(e.set(t,r({},a,{delay:u+l(n)})))}),i}(g,n,M,j):[]},V=function(){if(!M)return[];h&&(M=h(M,n,u));var e=M.preTransition,o=M.transition;return e&&M.preTransition(j),Object.keys(i.getPoseValues(M)).map(function(e){return new Promise(function(a){var i=m.get(e),u=r({},j,{key:e,value:i}),s=v(i,t.resolveProp(M[e],u));b.has(e)&&f(b.get(e));var h=r({to:s},u,d(i,s,u)),g=o(h);!1===g&&(g=l(i,h));var y=t.resolveProp(M.delay,u);(w||y)&&(g=p(w||y,g)),b.set(e,c(i,g,a)),O.set(e,n)})})};if(M&&_){if(t.resolveProp(M.beforeChildren,j))return Promise.all(V()).then(function(){return Promise.all(x())});if(t.resolveProp(M.afterChildren,j))return Promise.all(x()).then(function(){return Promise.all(V())})}return Promise.all(V().concat(x()))}}});o(u);u.resolveProp;var s=a(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){return function(e){return e.includes("scale")}(e)?1:0},n=function(e,t,n){var o=t.userSetValues,a=t.createValue,i=t.convertValue,s=t.readValueFromSource,c=t.initialPose,f=t.poses,l=t.props;return function(t){if(!e.has(t)){var n;if(o&&void 0!==o[t])n=i(o[t],t,l);else{var p=function(e,t,n,o,a){void 0===a&&(a=r);var i=(Array.isArray(n)?n:[n]).find(function(r){return e[r]&&void 0!==e[r][t]});return i?u.resolveProp(e[i][t],o):a(t,o)}(f,t,c,l,s);n=a(p,t,l)}e.set(t,n)}}};t.default=function(e){var t=e.poses,r=e.passive,o=new Map;return Object.keys(t).forEach(function(e,t){return function(r){var o=t.poses[r];Object.keys(i.getPoseValues(o)).forEach(n(e,t))}}(o,e)),r&&Object.keys(r).forEach(function(e,t){var r=t.passive,n=t.ancestorValues,o=t.createValue,a=t.readValue,i=t.props;return function(t){var u=r[t],s=u[0],c=u[1],f=u[2],l=f&&n.length?function(e,t,r){if(!0===t)return r[0]&&r[0].values.get(e);var n=r.find(function(e){return e.label===t});return n&&n.values.get(e)}(s,f,n):!!e.has(s)&&e.get(s);if(l){var p=o(a(l),t,i,{passiveParent:l,passiveProps:c,props:i});e.set(t,p)}}}(o,e)),o}});o(s);var c=a(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=function(){};t.warning=r;var n=function(){};t.invariant=n,t.warning=r=function(e,t){e||"undefined"==typeof console||console.warn("Hey, listen! "+t)},t.invariant=n=function(e,t){if(!e)throw new Error("Hey, listen! ".toUpperCase()+t)}});o(c);c.warning,c.invariant;var f=a(function(e,t){var r=n&&n.__assign||Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e};Object.defineProperty(t,"__esModule",{value:!0});t.default=function(e,t){return Object.keys(e).forEach(function(n){var o=e[n];c.invariant("object"==typeof o,"Pose '"+n+"' is of invalid type. All poses should be objects."),e[n]=o.transition?o:function(e,t,n){return r({},e,{transition:n.has(t)?n.get(t):n.get("default")})}(o,n,t)}),e}});o(f);var l=a(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){return function(t){return function(r){var n=r[e],o=t[n]||t.default;return!!o&&o(r)}}};t.eachValue=r("key"),t.fromPose=r("prevPoseKey")});o(l);l.eachValue,l.fromPose;var p=a(function(e,t){var r=n&&n.__assign||Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},o=n&&n.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a=o(u),p=o(s),d=o(f);t.eachValue=l.eachValue,t.fromPose=l.fromPose;t.default=function(e){var t=e.getDefaultProps,n=e.defaultTransitions,o=e.bindOnChange,u=e.startAction,s=e.stopAction,f=e.readValue,l=e.readValueFromSource,v=e.resolveTarget,h=e.createValue,g=e.convertValue,m=e.getInstantTransition,y=e.getTransitionProps,b=e.addActionDelay,O=e.selectValueToRead,P=e.transformPose,w=e.extendAPI;return function(e){c.warning(!e.hasOwnProperty("transformProps"),"config.transformProps is deprecated. Use config.props instead.");var _=e.parentValues,M=e.ancestorValues,j=void 0===M?[]:M;_&&j.unshift({values:_});var x=new Map,V=new Map,A=new Set,S=d.default(i.selectPoses(e),n),F=e.props||e.transformProps||{};t&&(F=r({},F,t(e)));var C=e.passive,T=e.values,E=e.initialPose,k=p.default({poses:S,passive:C,ancestorValues:j,readValue:f,createValue:h,convertValue:g,readValueFromSource:l,userSetValues:T,initialPose:E,props:F}),D={activeActions:x,activePoses:V,children:A,props:F,values:k},I=e.onChange;I&&Object.keys(I).forEach(o(k,I));var Y=a.default({state:D,poses:S,getInstantTransition:m,getTransitionProps:y,startAction:u,stopAction:s,resolveTarget:v,addActionDelay:b,transformPose:P});return w({set:Y,get:function(e){return e?O(k.get(e)):i.selectAllValues(k,O)},has:function(e){return!!S[e]},setProps:function(e){F=r({},F,e)},setTransitionProps:function(e){c.warning(!1,"setTransformProps is deprecated. Use setProps instead."),F=r({},F,e)},_addChild:function(t,n){var o=n(r({initialPose:E},t,{ancestorValues:[{label:e.label,values:k}].concat(j)}));return A.add(o),o},removeChild:function(e){return A.delete(e)},clearChildren:function(){A.forEach(function(e){return e.destroy()}),A.clear()},destroy:function(){x.forEach(s),A.forEach(function(e){return e.destroy()})}},D,e)}}}),d=o(p),v=(p.eachValue,p.fromPose,0),h="undefined"!=typeof window&&void 0!==window.requestAnimationFrame?function(e){return window.requestAnimationFrame(e)}:function(e){var t=Date.now(),r=Math.max(0,16.7-(t-v));v=t+r,setTimeout(function(){return e(v)},r)};function g(e){var t=[],r=[],n=0,o=!1,a=0;return{cancel:function(e){var t=r.indexOf(e);-1!==t&&r.splice(t,1)},process:function(){for(o=!0,t=(e=[r,t])[0],(r=e[1]).length=0,n=t.length,a=0;a<n;a++)t[a]();var e;o=!1},schedule:function(a,i){void 0===i&&(i=!1),e();var u=i&&o,s=u?t:r;-1===s.indexOf(a)&&(s.push(a),u&&(n=t.length))}}}var m="undefined"!=typeof performance&&void 0!==performance.now?function(){return performance.now()}:function(){return Date.now()},y=!1,b=40,O=16.7,P=!0,w=0,_=0;function M(){y||(y=!0,P=!0,h(S))}var j=g(M),x=g(M),V=g(M),A=g(M);function S(e){y=!1,_=P?O:Math.max(Math.min(e-w,b),1),P||(O=_),w=e,j.process(),x.process(),V.process(),A.process(),y&&(P=!1)}var F=j.schedule,C=x.schedule,T=V.schedule,E=A.schedule,k=j.cancel,D=x.cancel,I=V.cancel,Y=A.cancel,X=Object.freeze({currentTime:m,onFrameStart:F,onFrameUpdate:C,onFrameRender:T,onFrameEnd:E,cancelOnFrameStart:k,cancelOnFrameUpdate:D,cancelOnFrameRender:I,cancelOnFrameEnd:Y,timeSinceLastFrame:function(){return _},currentFrameTime:function(){return w}}),L=a(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){return"number"==typeof e};t.isPoint=function(e){return void 0!==e.x&&void 0!==e.y},t.isPoint3D=function(e){return void 0!==e.z};var n={x:0,y:0,z:0},o=function(e,t){return Math.abs(e-t)};t.angle=function(e,r){return void 0===r&&(r=n),t.radiansToDegrees(Math.atan2(r.y-e.y,r.x-e.x))},t.degreesToRadians=function(e){return e*Math.PI/180},t.dilate=function(e,t,r){return e+(t-e)*r},t.distance=function(e,a){if(void 0===a&&(a=n),r(e)&&r(a))return o(e,a);if(t.isPoint(e)&&t.isPoint(a)){var i=o(e.x,a.x),u=o(e.y,a.y),s=t.isPoint3D(e)&&t.isPoint3D(a)?o(e.z,a.z):0;return Math.sqrt(Math.pow(i,2)+Math.pow(u,2)+Math.pow(s,2))}return 0},t.getProgressFromValue=function(e,t,r){var n=t-e;return 0===n?1:(r-e)/n},t.getValueFromProgress=function(e,t,r){return-r*e+r*t+e},t.pointFromAngleAndDistance=function(e,r,n){return r=t.degreesToRadians(r),{x:n*Math.cos(r)+e.x,y:n*Math.sin(r)+e.y}},t.radiansToDegrees=function(e){return 180*e/Math.PI},t.smooth=function(e,t,r,n){return void 0===n&&(n=0),o=t+r*(e-t)/Math.max(n,r),void 0===a&&(a=2),a=Math.pow(10,a),Math.round(o*a)/a;var o,a},t.speedPerFrame=function(e,t){return r(e)?e/(1e3/t):0},t.speedPerSecond=function(e,t){return t?e*(1e3/t):0},t.stepProgress=function(e,t){var r=1/(e-1),n=1-1/e,o=Math.min(t/n,1);return Math.floor(o/r)*r}});o(L);L.isPoint,L.isPoint3D,L.angle,L.degreesToRadians,L.dilate,L.distance,L.getProgressFromValue,L.getValueFromProgress,L.pointFromAngleAndDistance,L.radiansToDegrees,L.smooth,L.speedPerFrame,L.speedPerSecond,L.stepProgress;var R=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},U=function(e,t){return function(r){return Math.max(Math.min(r,t),e)}},B=function(e){return{test:(t=e,function(e){return"string"==typeof e&&-1!==e.indexOf(t)}),parse:parseFloat,transform:function(t){return""+t+e}};var t},z=function(e){return function(t){return"string"==typeof t&&0===t.indexOf(e)}},Z=function(e){return e.substring(e.indexOf("(")+1,e.lastIndexOf(")"))},q=function(e){return"string"==typeof e?e.split(/,\s*/):[e]};function H(e){var t=e.length;return function(r){for(var n={},o=q(Z(r)),a=0;a<t;a++)n[e[a]]=void 0!==o[a]?parseFloat(o[a]):1;return n}}var N={test:function(e){return"number"==typeof e},parse:parseFloat,transform:function(e){return e}},K=R({},N,{transform:U(0,1)}),W=B("deg"),$=B("%"),G=B("px"),J=R({},N,{default:1}),Q=/(-)?(\d[\d\.]*)/g,ee=function(e){return"${"+e+"}"},te={test:function(e){var t=e.match&&e.match(Q);return void 0!==t&&t.constructor===Array&&t.length>1},parse:function(e){var t={};return e.match(Q).forEach(function(e,r){return t[r]=parseFloat(e)}),t},createTransformer:function(e){var t=0,r=e.replace(Q,function(){return ee(""+t++)});return function(e){var t=r;for(var n in e)e.hasOwnProperty(n)&&(t=t.replace(ee(n),e[n].toString()));return t}}},re=U(0,255),ne=R({},N,{transform:function(e){return Math.round(re(e))}}),oe={test:z("rgb"),parse:H(["red","green","blue","alpha"]),transform:function(e){var t=e.red,r=e.green,n=e.blue,o=e.alpha;return function(e){var t=e.red,r=e.green,n=e.blue,o=e.alpha;return"rgba("+t+", "+r+", "+n+", "+(void 0===o?1:o)+")"}({red:ne.transform(t),green:ne.transform(r),blue:ne.transform(n),alpha:o})}},ae={test:z("hsl"),parse:H(["hue","saturation","lightness","alpha"]),transform:function(e){var t=e.hue,r=e.saturation,n=e.lightness,o=e.alpha;return function(e){var t=e.hue,r=e.saturation,n=e.lightness,o=e.alpha;return"hsla("+t+", "+r+", "+n+", "+(void 0===o?1:o)+")"}({hue:Math.round(t),saturation:$.transform(r),lightness:$.transform(n),alpha:o})}},ie=R({},oe,{test:z("#"),parse:function(e){var t,r,n;return e.length>4?(t=e.substr(1,2),r=e.substr(3,2),n=e.substr(5,2)):(t=e.substr(1,1),r=e.substr(2,1),n=e.substr(3,1),t+=t,r+=r,n+=n),{red:parseInt(t,16),green:parseInt(r,16),blue:parseInt(n,16),alpha:1}}}),ue={test:function(e){return oe.test(e)||ae.test(e)||ie.test(e)},parse:function(e){return oe.test(e)?oe.parse(e):ae.test(e)?ae.parse(e):ie.test(e)?ie.parse(e):e},transform:function(e){return function(e){return void 0!==e.red}(e)?oe.transform(e):function(e){return void 0!==e.hue}(e)?ae.transform(e):e}},se=Object.freeze({getValueFromFunctionString:Z,splitCommaDelimited:q,splitColorValues:H,number:N,alpha:K,degrees:W,percent:$,px:G,scale:J,complex:te,rgbUnit:ne,rgba:oe,hsla:ae,hex:ie,color:ue}),ce=a(function(e,t){var r=n&&n.__assign||Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e};Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){return e};t.appendUnit=function(e){return function(t){return""+t+e}},t.applyOffset=function(e,t){var r=!0;void 0===t&&(t=e,r=!1);return function(n){return r?function(e){return e+t}(function(t){return t-e}(n)):(e=n,r=!0,t)}};var a=function(e,t,r){var n=e*e,o=t*t;return Math.sqrt(r*(o-n)+n)};t.blendColor=function(e,t){var n="string"==typeof e?se.color.parse(e):e,o="string"==typeof t?se.color.parse(t):t,i=r({},n),u=void 0!==e.hue||"string"==typeof e&&se.hsla.test(e)?L.getValueFromProgress:a;return function(e){for(var t in i=r({},i))"alpha"!==t&&i.hasOwnProperty(t)&&(i[t]=u(n[t],o[t],e));return i.alpha=L.getValueFromProgress(n.alpha,o.alpha,e),i}},t.clamp=function(e,t){return function(r){return Math.min(Math.max(r,e),t)}};var i=function(e,t){return function(r){return t(e(r))}};t.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.reduce(i)},t.conditional=function(e,t){return function(r){return e(r)?t(r):r}};t.interpolate=function(e,t,r){var n,o,a,i,u=e.length;return 2!==u?function(e,t,r,n){var o=r-1;return e[0]>e[o]&&(e.reverse(),t.reverse()),function(a){if(a<=e[0])return t[0];if(a>=e[o])return t[o];for(var i=1;i<r&&!(e[i]>a||i===o);i++);var u=L.getProgressFromValue(e[i-1],e[i],a),s=n?n[i-1](u):u;return L.getValueFromProgress(t[i-1],t[i],s)}}(e,t,u,r):(n=e[0],o=e[1],a=t[0],i=t[1],function(e){return(e-n)*(i-a)/(o-n)+a})},t.generateStaticSpring=function(e){return void 0===e&&(e=o),function(t,r){return function(n){var o=r-n,a=-t*(0-e(Math.abs(o)));return o<=0?r+a:r-a}}},t.linearSpring=t.generateStaticSpring(),t.nonlinearSpring=t.generateStaticSpring(Math.sqrt),t.wrap=function(e,t){return function(r){var n=t-e;return((r-e)%n+n)%n+e}},t.smooth=function(e){void 0===e&&(e=50);var t=0,r=0;return function(n){var o=X.currentFrameTime(),a=o!==r?o-r:0,i=a?L.smooth(n,t,a,e):t;return r=o,t=i,i}},t.snap=function(e){if("number"==typeof e)return function(t){return Math.round(t/e)*e};var t=0,r=e.length;return function(n){var o=Math.abs(e[0]-n);for(t=1;t<r;t++){var a=e[t],i=Math.abs(a-n);if(0===i)return a;if(i>o)return e[t-1];if(t===r-1)return a;o=i}}},t.steps=function(e,t,r){return void 0===t&&(t=0),void 0===r&&(r=1),function(n){var o=L.getProgressFromValue(t,r,n);return L.getValueFromProgress(t,r,L.stepProgress(e,o))}},t.transformMap=function(e){return function(t){var n=r({},t);for(var o in e)if(e.hasOwnProperty(o)){var a=e[o];n[o]=a(t[o])}return n}}});o(ce);ce.appendUnit,ce.applyOffset,ce.blendColor,ce.clamp,ce.pipe,ce.conditional;var fe=ce.interpolate,le=(ce.generateStaticSpring,ce.linearSpring,ce.nonlinearSpring,ce.wrap,ce.smooth,ce.snap,ce.steps,ce.transformMap,a(function(e,t){var r=n&&n.__assign||Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e};Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e){void 0===e&&(e={}),this.props=e}return e.prototype.applyMiddleware=function(e){return this.create(r({},this.props,{middleware:this.props.middleware?[e].concat(this.props.middleware):[e]}))},e.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=1===e.length?e[0]:ce.pipe.apply(void 0,e);return this.applyMiddleware(function(e){return function(t){return e(r(t))}})},e.prototype.while=function(e){return this.applyMiddleware(function(t,r){return function(n){return e(n)?t(n):r()}})},e.prototype.filter=function(e){return this.applyMiddleware(function(t,r){return function(r){return e(r)&&t(r)}})},e}();t.default=o}));o(le);var pe=a(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=function(){return function(e,t){var r=e.middleware,n=e.onComplete,o=this;this.isActive=!0,this.update=function(e){o.observer.update&&o.updateObserver(e)},this.complete=function(){o.observer.complete&&o.isActive&&o.observer.complete(),o.onComplete&&o.onComplete(),o.isActive=!1},this.error=function(e){o.observer.error&&o.isActive&&o.observer.error(e),o.isActive=!1},this.observer=t,this.updateObserver=function(e){return t.update(e)},this.onComplete=n,t.update&&r&&r.length&&r.forEach(function(e){return o.updateObserver=e(o.updateObserver,o.complete)})}}();t.Observer=r,t.default=function(e,t,n){var o=t.middleware;return new r({middleware:o,onComplete:n},"function"==typeof e?{update:e}:e)}});o(pe);pe.Observer;var de=a(function(e,t){var r,o=n&&n.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var a=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.subscribers=[],t}return o(t,e),t.prototype.complete=function(){this.subscribers.forEach(function(e){return e.complete()})},t.prototype.error=function(e){this.subscribers.forEach(function(t){return t.error(e)})},t.prototype.update=function(e){for(var t=0;t<this.subscribers.length;t++)this.subscribers[t].update(e)},t.prototype.subscribe=function(e){var t=this,r=pe.default(e,this.props);return this.subscribers.push(r),{unsubscribe:function(){var e=t.subscribers.indexOf(r);-1!==e&&t.subscribers.splice(e,1)}}},t.prototype.stop=function(){this.parent&&this.parent.stop()},t.prototype.registerParent=function(e){this.stop(),this.parent=e},t}(le.default);t.BaseMulticast=a});o(de);de.BaseMulticast;var ve=a(function(e,t){var r,o=n&&n.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var a=function(e){return Array.isArray(e)},i=function(e){var t=typeof e;return"string"===t||"number"===t},u=function(e){function t(t){var r=e.call(this,t)||this;return r.scheduleVelocityCheck=function(){return X.onFrameEnd(r.velocityCheck)},r.velocityCheck=function(){X.currentFrameTime()!==r.lastUpdated&&(r.prev=r.current)},r.prev=r.current=t.value||0,i(r.current)?(r.updateCurrent=function(e){return r.current=e},r.getVelocityOfCurrent=function(){return r.getSingleVelocity(r.current,r.prev)}):a(r.current)?(r.updateCurrent=function(e){return r.current=e.slice()},r.getVelocityOfCurrent=function(){return r.getListVelocity()}):(r.updateCurrent=function(e){for(var t in r.current={},e)e.hasOwnProperty(t)&&(r.current[t]=e[t])},r.getVelocityOfCurrent=function(){return r.getMapVelocity()}),t.initialSubscription&&r.subscribe(t.initialSubscription),r}return o(t,e),t.prototype.create=function(e){return new t(e)},t.prototype.get=function(){return this.current},t.prototype.getVelocity=function(){return this.getVelocityOfCurrent()},t.prototype.update=function(t){e.prototype.update.call(this,t),this.prev=this.current,this.updateCurrent(t),this.timeDelta=X.timeSinceLastFrame(),this.lastUpdated=X.currentFrameTime(),X.onFrameEnd(this.scheduleVelocityCheck)},t.prototype.subscribe=function(t){var r=e.prototype.subscribe.call(this,t);return this.update(this.current),r},t.prototype.getSingleVelocity=function(e,t){return"number"==typeof e&&"number"==typeof t?L.speedPerSecond(e-t,this.timeDelta):L.speedPerSecond(parseFloat(e)-parseFloat(t),this.timeDelta)||0},t.prototype.getListVelocity=function(){var e=this;return this.current.map(function(t,r){return e.getSingleVelocity(t,e.prev[r])})},t.prototype.getMapVelocity=function(){var e={};for(var t in this.current)this.current.hasOwnProperty(t)&&(e[t]=this.getSingleVelocity(this.current[t],this.prev[t]));return e},t}(de.BaseMulticast);t.ValueReaction=u,t.default=function(e,t){return new u({value:e,initialSubscription:t})}}),he=o(ve),ge=(ve.ValueReaction,a(function(e,t){var r,o=n&&n.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=n&&n.__assign||Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},i=n&&n.__rest||function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&(r[n[o]]=e[n[o]])}return r};Object.defineProperty(t,"__esModule",{value:!0});var u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.create=function(e){return new t(e)},t.prototype.start=function(e){void 0===e&&(e={});var t=!1,r={stop:function(){}},n=this.props,o=n.init,u=i(n,["init"]),s=o(pe.default(e,u,function(){t=!0,r.stop()}));return r=s?a({},r,s):r,e.registerParent&&e.registerParent(r),t&&r.stop(),r},t}(le.default);t.Action=u,t.default=function(e){return new u({init:e})}})),me=o(ge),ye=(ge.Action,o(a(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});t.default=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return ge.default(function(t){var r,n=t.update,o=t.complete,a=0,i=function(){r=e[a].start({complete:function(){++a>=e.length?o():i()},update:n})};return i(),{stop:function(){return r&&r.stop()}}})}}))),be=o(a(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});t.default=function(e){return ge.default(function(t){var r=t.complete,n=setTimeout(r,e);return{stop:function(){return clearTimeout(n)}}})}})),Oe=a(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});t.default=function(e){var t=e.getCount,r=e.getFirst,n=e.getOutput,o=e.mapApi,a=e.setProp,i=e.startActions;return function(e){return ge.default(function(u){var s=u.update,c=u.complete,f=u.error,l=t(e),p=n(),d=function(){return s(p)},v=0,h=i(e,function(e,t){var r=!1;return e.start({complete:function(){r||(r=!0,++v===l&&X.onFrameUpdate(c))},error:f,update:function(e){a(p,t,e),X.onFrameUpdate(d,!0)}})});return Object.keys(r(h)).reduce(function(e,t){return e[t]=o(h,t),e},{})})}}});o(Oe);var Pe=a(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=Oe.default({getOutput:function(){return{}},getCount:function(e){return Object.keys(e).length},getFirst:function(e){return e[Object.keys(e)[0]]},mapApi:function(e,t){return function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return Object.keys(e).reduce(function(n,o){return e[o][t]&&(r[0]&&void 0!==r[0][o]?n[o]=e[o][t](r[0][o]):n[o]=(a=e[o])[t].apply(a,r)),n;var a},{})}},setProp:function(e,t,r){return e[t]=r},startActions:function(e,t){return Object.keys(e).reduce(function(r,n){return r[n]=t(e[n],n),r},{})}});t.default=r});o(Pe);var we=a(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=Oe.default({getOutput:function(){return[]},getCount:function(e){return e.length},getFirst:function(e){return e[0]},mapApi:function(e,t){return function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return e.map(function(e,n){if(e[t])return Array.isArray(r[0])?e[t](r[0][n]):e[t].apply(e,r)})}},setProp:function(e,t,r){return e[t]=r},startActions:function(e,t){return e.map(function(e,r){return t(e,r)})}});t.default=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return r(e)}});o(we);var _e=a(function(e,t){var r=n&&n.__assign||Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e};Object.defineProperty(t,"__esModule",{value:!0});var o=se.color.test,a=function(e,t){return"string"==typeof t.from&&o(t.from)&&"string"==typeof t.to&&o(t.to)?e(r({},t,{from:0,to:1})).pipe(ce.blendColor(t.from,t.to),se.color.transform):e(t)};t.default=function(e,t){var n=function(e){var t=Object.keys(e);return{getVectorKeys:function(r){return t.reduce(function(t,n){return void 0===r[n]||e[n](r[n])||t.push(n),t},[])},test:function(r){return r&&t.reduce(function(t,n){return t||void 0!==r[n]&&!e[n](r[n])},!1)}}}(t),i=n.test,u=n.getVectorKeys;return function(t){if(!i(t))return e(t);var n=u(t),s=t[n[0]];return Array.isArray(s)?function(e,t,n){var o=n[0],i=t[o].map(function(o,i){return a(e,n.reduce(function(e){return function(t,r){return t[r]=t[r][e],t}}(i),r({},t)))});return we.default.apply(void 0,i)}(e,t,n):"string"==typeof s&&o(s)?function(e,t){return a(e,t)}(e,t):function(e,t,n){var o=n[0],i=Object.keys(t[o]).reduce(function(o,i){return o[i]=a(e,n.reduce(function(e){return function(t,r){return t[r]=t[r][e],t}}(i),r({},t))),o},{});return Pe.default(i)}(e,t,n)}}});o(_e);var Me=a(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});t.default=function(){return ge.default(function(e){var t=e.update,r=!0,n=X.currentTime(),o=function(){r&&(t(Math.max(X.currentFrameTime()-n,0)),X.onFrameUpdate(o))};return X.onFrameUpdate(o),{stop:function(){return r=!1}}})}});o(Me);var je=o(a(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});t.default=_e.default(function(e){return void 0===e&&(e={}),ge.default(function(t){var r=t.update,n=t.complete,o=e.velocity,a=void 0===o?0:o,i=e.from,u=void 0===i?0:i,s=e.to,c=void 0===s?0:s,f=e.stiffness,l=void 0===f?100:f,p=e.damping,d=void 0===p?10:p,v=e.mass,h=void 0===v?1:v,g=e.restSpeed,m=void 0===g?.01:g,y=e.restDelta,b=void 0===y?.01:y,O=a?-a/1e3:0,P=0,w=c-u,_=u,M=_,j=Me.default().start(function(){var e=X.timeSinceLastFrame();P+=e;var t=d/(2*Math.sqrt(l*h)),o=Math.sqrt(l/h)/1e3;if(M=_,t<1){var i=Math.exp(-t*o*P),u=o*Math.sqrt(1-t*t);_=c-i*((O+t*o*w)/u*Math.sin(u*P)+w*Math.cos(u*P))}else i=Math.exp(-o*P),_=c-i*(w+(O+o*w)*P);a=L.speedPerSecond(_-M,e);var s=Math.abs(a)<=m,f=Math.abs(c-_)<=b;s&&f?(r(_=c),j.stop(),n()):r(_)});return{stop:function(){return j.stop()}}})},{from:se.number.test,to:se.number.test,stiffness:se.number.test,damping:se.number.test,mass:se.number.test,velocity:se.number.test})})),xe=a(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});t.createReversedEasing=function(e){return function(t){return 1-e(1-t)}},t.createMirroredEasing=function(e){return function(t){return t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2}},t.linear=function(e){return e},t.createExpoIn=function(e){return function(t){return Math.pow(t,e)}},t.easeIn=t.createExpoIn(2),t.easeOut=t.createReversedEasing(t.easeIn),t.easeInOut=t.createMirroredEasing(t.easeIn),t.circIn=function(e){return 1-Math.sin(Math.acos(e))},t.circOut=t.createReversedEasing(t.circIn),t.circInOut=t.createMirroredEasing(t.circOut),t.createBackIn=function(e){return function(t){return t*t*((e+1)*t-e)}},t.backIn=t.createBackIn(1.525),t.backOut=t.createReversedEasing(t.backIn),t.backInOut=t.createMirroredEasing(t.backIn),t.createAnticipateEasing=function(e){var r=t.createBackIn(e);return function(e){return(e*=2)<1?.5*r(e):.5*(2-Math.pow(2,-10*(e-1)))}},t.anticipate=t.createAnticipateEasing(1.525);var r=8,n=.001,o=1e-7,a=10,i=11,u=1/(i-1),s="undefined"!=typeof Float32Array,c=function(e,t){return 1-3*t+3*e},f=function(e,t){return 3*t-6*e},l=function(e){return 3*e},p=function(e,t,r){return 3*c(t,r)*e*e+2*f(t,r)*e+l(t)},d=function(e,t,r){return((c(t,r)*e+f(t,r))*e+l(t))*e};t.cubicBezier=function(e,t,c,f){var l=s?new Float32Array(i):new Array(i),v=!1,h=function(t){for(var s,f,v,h=0,g=1,m=i-1;g!=m&&l[g]<=t;++g)h+=u;return s=(t-l[--g])/(l[g+1]-l[g]),(v=p(f=h+s*u,e,c))>=n?function(t,n){for(var o=0,a=0;o<r;++o){if(0===(a=p(n,e,c)))return n;n-=(d(n,e,c)-t)/a}return n}(t,f):0===v?f:function(t,r,n){var i,u,s=0;do{(i=d(u=r+(n-r)/2,e,c)-t)>0?n=u:r=u}while(Math.abs(i)>o&&++s<a);return u}(t,h,h+u)},g=function(){v=!0,e==t&&c==f||function(){for(var t=0;t<i;++t)l[t]=d(t*u,e,c)}()};return function(r){return v||g(),e===t&&c===f?r:0===r?0:1===r?1:d(h(r),t,f)}}});o(xe);xe.createReversedEasing,xe.createMirroredEasing;var Ve=xe.linear,Ae=(xe.createExpoIn,xe.easeIn,xe.easeOut,xe.easeInOut,xe.circIn,xe.circOut,xe.circInOut,xe.createBackIn,xe.backIn,xe.backOut,xe.backInOut,xe.createAnticipateEasing,xe.anticipate,xe.cubicBezier,a(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});t.default=_e.default(function(e){var t=e.from,r=void 0===t?0:t,n=e.to,o=void 0===n?1:n,a=e.ease,i=void 0===a?xe.linear:a;return ge.default(function(e){var t=e.update;return{seek:function(e){return t(e)}}}).pipe(i,function(e){return L.getValueFromProgress(r,o,e)})},{ease:function(e){return"function"==typeof e},from:se.number.test,to:se.number.test})}));o(Ae);var Se=o(a(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=ce.clamp(0,1);t.default=function(e){return void 0===e&&(e={}),ge.default(function(t){var n,o=t.update,a=t.complete,i=e.duration,u=void 0===i?300:i,s=e.ease,c=void 0===s?xe.easeOut:s,f=e.flip,l=void 0===f?0:f,p=e.loop,d=void 0===p?0:p,v=e.yoyo,h=void 0===v?0:v,g=e.from,m=void 0===g?0:g,y=e.to,b=void 0===y?1:y,O=e.elapsed,P=void 0===O?0:O,w=e.playDirection,_=void 0===w?1:w,M=e.flipCount,j=void 0===M?0:M,x=e.yoyoCount,V=void 0===x?0:x,A=e.loopCount,S=void 0===A?0:A,F=Ae.default({from:m,to:b,ease:c}).start(o),C=0,T=!1,E=function(){return _*=-1},k=function(){C=r(L.getProgressFromValue(0,u,P)),F.seek(C)},D=function(){T=!0,n=Me.default().start(function(){P+=X.timeSinceLastFrame()*_,k(),function(){var e=1===_?T&&P>=u:T&&P<=0;if(!e)return!1;if(e&&!d&&!l&&!h)return!0;var t,r=!1;return d&&S<d?(P=0,S++,r=!0):l&&j<l?(P=u-P,m=(t=[b,m])[0],b=t[1],F=Ae.default({from:m,to:b,ease:c}).start(o),j++,r=!0):h&&V<h&&(E(),V++,r=!0),!r}()&&a&&(n.stop(),X.onFrameUpdate(a,!0))})},I=function(){T=!1,n&&n.stop()};return D(),{isActive:function(){return T},getElapsed:function(){return ce.clamp(0,u)(P)},getProgress:function(){return C},stop:function(){I()},pause:function(){return I(),this},resume:function(){return D(),this},seek:function(e){return P=L.getValueFromProgress(0,u,e),X.onFrameUpdate(k,!0),this},reverse:function(){return E(),this}}})}})),Fe=a(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});t.default=function(e,t,r){return ge.default(function(n){var o=n.update,a=t.split(" ").map(function(t){return e.addEventListener(t,o,r),t});return{stop:function(){return a.forEach(function(t){return e.removeEventListener(t,o,r)})}}})}}),Ce=o(Fe),Te=a(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.defaultPointerPos=function(){return{clientX:0,clientY:0,pageX:0,pageY:0,x:0,y:0}},t.eventToPoint=function(e,r){return void 0===r&&(r=t.defaultPointerPos()),r.clientX=r.x=e.clientX,r.clientY=r.y=e.clientY,r.pageX=e.pageX,r.pageY=e.pageY,r}});o(Te);Te.defaultPointerPos,Te.eventToPoint;var Ee=a(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=[Te.defaultPointerPos()],n=!1;if("undefined"!=typeof document){Fe.default(document,"touchstart touchmove",!0).start(function(e){var t=e.touches;n=!0;var o=t.length;r.length=0;for(var a=0;a<o;a++){var i=t[a];r.push(Te.eventToPoint(i))}})}t.default=function(e){var t=void 0===e?{}:e,o=t.preventDefault,a=void 0===o||o,i=t.scale,u=void 0===i?1:i,s=t.rotate,c=void 0===s?0:s;return ge.default(function(e){var t=e.update,o={touches:r,scale:u,rotate:c},i=0,s=0,f=r.length>1;if(f){var l=r[0],p=r[1];i=L.distance(l,p),s=L.angle(l,p)}var d=function(){if(f){var e=r[0],n=r[1],a=L.distance(e,n),l=L.angle(e,n);o.scale=u*(a/i),o.rotate=c+(l-s)}t(o)},v=Fe.default(document,"touchmove",{passive:!a}).start(function(e){(a||e.touches.length>1)&&e.preventDefault(),X.onFrameUpdate(d)});return n&&X.onFrameUpdate(d),{stop:function(){X.cancelOnFrameUpdate(d),v.stop()}}})},t.getIsTouchDevice=function(){return n}});o(Ee);Ee.getIsTouchDevice;var ke=a(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=Te.defaultPointerPos(),n=!1;if("undefined"!=typeof document){Fe.default(document,"mousedown mousemove",!0).start(function(e){n=!0,Te.eventToPoint(e,r)})}t.default=function(e){var t=(void 0===e?{}:e).preventDefault,o=void 0===t||t;return ge.default(function(e){var t=e.update,a=function(){return t(r)},i=Fe.default(document,"mousemove").start(function(e){o&&e.preventDefault(),X.onFrameUpdate(a)});return n&&X.onFrameUpdate(a),{stop:function(){X.cancelOnFrameUpdate(a),i.stop()}}})}});o(ke);var De,Ie,Ye=o(a(function(e,t){var r=n&&n.__rest||function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&(r[n[o]]=e[n[o]])}return r};Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){return e[0]},a=function(e){return void 0===e&&(e={}),Ee.getIsTouchDevice()?Ee.default(e).pipe(function(e){return e.touches},o):ke.default(e)};t.default=function(e){void 0===e&&(e={});var t=e.x,n=e.y,o=r(e,["x","y"]);if(void 0!==t||void 0!==n){var i=ce.applyOffset(t||0),u=ce.applyOffset(n||0),s={x:0,y:0};return a(o).pipe(function(e){return s.x=i(e.x),s.y=u(e.y),s})}return a(o)}})),Xe=(De="key",function(e){return function(t){var r=t[De],n=e[r]||e.default;return!!n&&n(t)}});!function(e){e.width="width",e.height="height",e.left="left",e.right="right",e.top="top",e.bottom="bottom"}(Ie||(Ie={}));var Le,Re=function(e){return function(t){return Ye((r={},r[e]=t,r)).pipe(function(t){return t[e]});var r}},Ue=Re("x"),Be=Re("y"),ze=function(e,t,r,n){return function(o){var a=o.from,i=o.type,u=o.dimensions,s=o.dragBounds,c=e(u.measurementAsPixels(n,a,i)),f=[];return s&&(void 0!==s[t]&&f.push(function(e){return Math.max(e,u.measurementAsPixels(n,s[t],i))}),void 0!==s[r]&&f.push(function(e){return Math.min(e,u.measurementAsPixels(n,s[r],i))})),i===$&&f.push(fe([0,u.get(n)],[0,100])),f.length?c.pipe.apply(c,f):c}},Ze=function(e){return me(function(t){var r=t.update,n=t.complete;r(e),n()})},qe=function(e){var t=e.from,r=e.velocity,n=e.to;return je({from:t,to:n,velocity:r,stiffness:500,damping:25,restDelta:.5,restSpeed:10})},He=function(e){var t=e.from,r=e.velocity,n=e.to;return je({from:t,to:n,velocity:r,stiffness:700,damping:0===n?100:35})},Ne=Xe({x:qe,y:qe,z:qe,rotate:qe,rotateX:qe,rotateY:qe,rotateZ:qe,scaleX:He,scaleY:He,scale:He,opacity:function(e){var t=e.from,r=e.to;return Se({from:t,to:r,ease:Ve})},default:Se}),Ke=Xe({x:ze(Ue,"left","right",Ie.width),y:ze(Be,"top","bottom",Ie.height)}),We=new Map([["default",Ne],["dragging",Ke],["dragEnd",function(e){var t=e.from;return Ze(t)}]]),$e=[N,W,$,G],Ge=function(e){return function(t){return t.test(e)}},Je=function(e,t,r,n){var o=n.props;o.draggable&&function(e,t,r,n){var o=n.onDragStart,a=n.onDragEnd,i=Ce(e,"mousedown touchstart").start(function(e){e.preventDefault(),r("dragging"),o&&o(e);var n=Ce(document,"mouseup touchend").start(function(e){t.get("dragEndListener").stop(),r("dragEnd"),a&&a(e)});t.set("dragEndListener",n)});t.set("dragStartListener",i)}(e,t,r,o)},Qe=function(e){var t=e.top,r=e.right,n=e.bottom;return{x:(e.left+r)/2,y:(t+n)/2}},et=["width","height","top","left","bottom","right"],tt=new Set(et),rt=function(e){return tt.has(e)},nt=function(e){return Object.keys(e).some(rt)},ot=function(e,t,r){var n=e.values,o=e.props;if(n.has(t)){var a=n.get(t).raw;a.update(r),a.update(r)}else n.set(t,{raw:he(r,function(e){return o.elementStyler.set(t,e)})})},at=function(e,r){var n=e.props,o=n.dimensions,a=n.element,i=n.elementStyler;if(!o.has())return{};var u=o.get(),s=a.style.transform;a.style.transform="";var c=a.getBoundingClientRect();a.style.transform=s;var f=u.left===c.left?0:u.right===c.right?"100%":"50%",l=u.top===c.top?0:u.bottom===c.bottom?"100%":"50%";i.set({originX:f,originY:l});var p={};u.width!==c.width&&(ot(e,"scaleX",u.width/c.width),p.scaleX=1),u.height!==c.height&&(ot(e,"scaleY",u.height/c.height),p.scaleY=1);var d=Qe(u),v=Qe(c);return"50%"===f&&(ot(e,"x",d.x-v.x),p.x=0),"50%"===l&&(ot(e,"y",d.y-v.y),p.y=0),i.render(),t({},r,p)},it=function(e,t){return nt(t)?function(e,t){var n=e.props,o=n.dimensions,a=n.elementStyler;o.measure();t.width,t.height,t.top,t.left,t.bottom,t.right;var i=r(t,["width","height","top","left","bottom","right"]);return a.set(et.reduce(function(r,n){var o,a;return void 0!==t[n]&&(r[n]=(o=t[n],a=e.props,"function"==typeof o?o(a):o)),r},{})).render(),at(e,i)}(e,t):at(e,t)};Le=function(e,t){if(!e)throw new Error("Hey, listen! ".toUpperCase()+t)};var ut,st=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},ct=function(e){var t=e.onRead,r=e.onRender,n=e.aliasMap,o=void 0===n?{}:n,a=e.useCache,i=void 0===a||a;return function(e){var n={},a=[],u=!1,s=function(e,t){var r=o[e]||e,i=n[r];n[r]=t,n[r]!==i&&(-1===a.indexOf(r)&&a.push(r),u||(u=!0,T(c)))};function c(t){return void 0===t&&(t=!1),(t||u)&&(r(n,e,a),u=!1,a.length=0),this}return{get:function(r){var a=o[r]||r;return a?i&&void 0!==n[a]?n[a]:t(a,e):n},set:function(e,t){if("string"==typeof e){if(void 0===t)return function(t){return s(e,t)};s(e,t)}else for(var r in e)e.hasOwnProperty(r)&&s(r,e[r]);return this},render:c}}},ft=/([a-z])([A-Z])/g,lt=function(e){return e.replace(ft,"$1-$2").toLowerCase()},pt=new Map,dt=new Map,vt=["Webkit","Moz","O","ms",""],ht=vt.length,gt=function(e,t){void 0===t&&(t=!1);var r=t?dt:pt;return r.has(e)||function(e){if("undefined"!=typeof document){ut=ut||document.createElement("div");for(var t=0;t<ht;t++){var r=vt[t],n=""===r,o=n?e:r+e.charAt(0).toUpperCase()+e.slice(1);o in ut.style&&(pt.set(e,o),dt.set(e,(n?"":"-")+lt(o)))}}}(e),r.get(e)||e},mt=["","X","Y","Z"],yt=["translate","scale","rotate","skew","transformPerspective"].reduce(function(e,t){return mt.reduce(function(e,r){return e.push(t+r),e},e)},["x","y","z"]),bt=yt.reduce(function(e,t){return e[t]=!0,e},{}),Ot=function(e){return!0===bt[e]},Pt=function(e,t){return yt.indexOf(e)-yt.indexOf(t)},wt=function(e){return"transformOriginX"===e||"transformOriginY"===e},_t={color:ue,backgroundColor:ue,outlineColor:ue,fill:ue,stroke:ue,borderColor:ue,borderTopColor:ue,borderRightColor:ue,borderBottomColor:ue,borderLeftColor:ue,borderRadius:G,width:G,maxWidth:G,height:G,maxHeight:G,top:G,left:G,bottom:G,right:G,rotate:W,rotateX:W,rotateY:W,rotateZ:W,scale:J,scaleX:J,scaleY:J,scaleZ:J,skewX:W,skewY:W,distance:G,translateX:G,translateY:G,translateZ:G,perspective:G,opacity:K,transformOriginX:$,transformOriginY:$,transformOriginZ:G},Mt=function(e){return _t[e]},jt="number",xt="object",Vt="transform-origin",At="transform",St="translateZ",Ft=";transform: none",Ct=function(e,t){return";"+e+":"+t};var Tt=new Set(["scrollLeft","scrollTop"]),Et=ct({onRead:function(e,t){var r=t.element,n=t.preparseOutput,o=Mt(e);if(Ot(e))return o&&o.default||0;if(Tt.has(e))return r[e];var a=window.getComputedStyle(r,null).getPropertyValue(gt(e,!0))||0;return n&&o&&o.parse?o.parse(a):a},onRender:function(e,t,r){var n=t.element,o=t.enableHardwareAcceleration;n.style.cssText+=function(e,t,r,n){void 0===t&&(t=!0),void 0===r&&(r=!0);for(var o=!0===t?Object.keys(e):t,a="",i="",u=!1,s=!0,c=!1,f=!1,l=o.length,p=0;p<l;p++){var d=o[p];if(Ot(d)){for(var v in c=!0,e)Ot(v)&&-1===o.indexOf(v)&&o.push(v);break}}o.sort(Pt);var h=o.length;for(p=0;p<h;p++)if(d=o[p],!n.has(d)){var g=Ot(d),m=e[d],y=Mt(d);g&&(y.default&&m!==y.default||!y.default&&0!==m)&&(s=!1),y&&(typeof m===jt||typeof m===xt)&&y.transform&&(m=y.transform(m)),g?(i+=d+"("+m+") ",f=d===St||f):wt(d)?(e[d]=m,u=!0):a+=Ct(gt(d,!0),m)}return u&&(a+=Ct(Vt,(e.transformOriginX||0)+" "+(e.transformOriginY||0)+" "+(e.transformOriginZ||0))),c&&(!f&&r&&(i+=St+"(0)"),a+=Ct(At,s?Ft:i)),a}(e,r,o,Tt),-1!==r.indexOf("scrollLeft")&&(n.scrollLeft=e.scrollLeft),-1!==r.indexOf("scrollTop")&&(n.scrollTop=e.scrollTop)},aliasMap:{x:"translateX",y:"translateY",z:"translateZ",originX:"transformOriginX",originY:"transformOriginY",originZ:"transformOriginZ"},uncachedValues:Tt}),kt=function(e,t){return e/100*t+"px"},Dt={fill:ue,stroke:ue,scale:J,scaleX:J,scaleY:J,opacity:K,fillOpacity:K,strokeOpacity:K},It=ct({onRead:function(e,t){var r=t.element;if(Ot(e)){var n=function(e){return Dt[e]}(e);return n?n.default:0}return r.getAttribute(e)},onRender:function(e,t,r){var n=t.dimensions;!function(e,t){for(var r in t)t.hasOwnProperty(r)&&e.setAttribute(r,t[r])}(t.element,function(e,t,r,n){var o=!1,a=!1,i={},u=r?{pathLength:"0",pathSpacing:""+n}:void 0,s=void 0!==e.scale?e.scale||1e-7:e.scaleX||1,c=void 0!==e.scaleY?e.scaleY||1e-7:s||1,f=t.width*((e.originX||50)/100)+t.x,l=t.height*((e.originY||50)/100)+t.y,p=1*s*-f,d=1*c*-l,v=f/s,h=l/c,g={translate:"translate("+e.translateX+", "+e.translateY+") ",scale:"translate("+p+", "+d+") scale("+s+", "+c+") translate("+v+", "+h+") ",rotate:"rotate("+e.rotate+", "+f+", "+l+") ",skewX:"skewX("+e.skewX+") ",skewY:"skewY("+e.skewY+") "};for(var m in e)if(e.hasOwnProperty(m)){var y=e[m];Ot(m)?o=!0:!r||"pathLength"!==m&&"pathSpacing"!==m||"number"!=typeof y?r&&"pathOffset"===m?i["stroke-dashoffset"]=kt(-y,n):i[lt(m)]=y:(a=!0,u[m]=kt(y,n))}if(a&&(i["stroke-dasharray"]=u.pathLength+" "+u.pathSpacing),o)for(var m in i.transform="",g)if(g.hasOwnProperty(m)){var b="scale"===m?"1":"0";i.transform+=g[m].replace(/undefined/g,b)}return i}(e,n,t.isPath,t.pathLength))},aliasMap:{x:"translateX",y:"translateY",background:"fill"}}),Yt=ct({useCache:!1,onRead:function(e){return"scrollTop"===e?window.pageYOffset:window.pageXOffset},onRender:function(e){var t=e.scrollTop,r=void 0===t?0:t,n=e.scrollLeft,o=void 0===n?0:n;return window.scrollTo(o,r)}}),Xt=new WeakMap,Lt=function(e,t){var r;return e instanceof HTMLElement?r=function(e,t){return Et(st({element:e,enableHardwareAcceleration:!0,preparseOutput:!0},t))}(e,t):e instanceof SVGElement?r=function(e){var t=e.getBBox(),r={element:e,dimensions:{x:t.x,y:t.y,width:t.width,height:t.height},isPath:!1};return"path"===e.tagName&&(r.isPath=!0,r.pathLength=e.getTotalLength()),It(r)}(e):"undefined"!=typeof window&&e===window&&(r=Yt(e)),Le(void 0!==r,"No valid node provided. Node must be HTMLElement, SVGElement or window."),Xt.set(e,r),r},Rt=function(e,t){return Xt.has(e)?Xt.get(e):Lt(e,t)};var Ut,Bt,zt,Zt,qt,Ht=function(e,n){var o,a,i,u=n.onDragStart,s=n.onDragEnd,c=n.draggable,f=n.dragBounds,l=r(n,["onDragStart","onDragEnd","draggable","dragBounds"]),p=t({flip:{}},l,{props:t({},l.props,{draggable:c,onDragStart:u,onDragEnd:s,dragBounds:f,element:e,elementStyler:(o=e,a={preparseOutput:!1},i="string"==typeof o?document.querySelector(o):o,Rt(i,a)),dimensions:function(e){var t=!1,r={width:0,height:0,top:0,left:0,bottom:0,right:0};return{get:function(e){return e?r[e]:r},measure:function(){return r=e.getBoundingClientRect(),t=!0,r},measurementAsPixels:function(e,t,n){return n===$&&"number"==typeof t?t/100*r[e]:t},has:function(){return t}}}(e)})});if(c){var d=function(e){var t={preTransition:function(e){return e.dimensions.measure()}},r={};return!0!==e&&"x"!==e||(t.x=r.x=0),!0!==e&&"y"!==e||(t.y=r.y=0),{dragging:t,dragEnd:r}}(c),v=d.dragging,h=d.dragEnd;p.dragging=t({},p.dragging,v),p.dragEnd=t({},p.dragEnd,h)}return p},Nt=(Bt=(Ut={transformPose:function(e,t,r){return function(e,t,r){return r.props.element instanceof HTMLElement&&(nt(e)||"flip"===t)}(e,t,r)?it(r,e):e},addListenerToValue:function(e,t){return function(r){return t.set(e,r)}},readValueFromSource:function(e,t){var r=t.elementStyler.get(e);return isNaN(r)?r:parseFloat(r)},extendAPI:function(e,r,n){var o=r.props,a=r.activeActions,i=o.dimensions.measure,u=t({},e,{addChild:function(t,r){return e._addChild(Ht(t,r),Nt)},measure:i,flip:function(t){return t&&(i(),t()),e.set("flip")}});return Je(o.element,a,e.set,n),u}}).transformPose,zt=Ut.addListenerToValue,Zt=Ut.extendAPI,qt=Ut.readValueFromSource,d({bindOnChange:function(e,t){return function(r){e.has(r)&&e.get(r).raw.subscribe(t[r])}},readValue:function(e){return e.raw.get()},createValue:function(e,t,r,n){var o=r.elementStyler,a=void 0===n?{}:n,i=a.passiveParent,u=a.passiveProps,s=i?function(e,t,r){var n=he(e).pipe(r);return t.raw.subscribe(n),{raw:n}}(e,i,u):function(e){var t=$e.find(Ge(e));return{raw:he(t===N?t.parse(e):e),type:t}}(e);return zt&&s.raw.subscribe(zt(t,o)),s},convertValue:function(e,t,r){var n=r.elementStyler;return zt&&e.subscribe(zt(t,n)),{raw:e,type:$e.find(Ge(e.get()))}},getTransitionProps:function(e,t){var r=e.raw,n=e.type;return{from:n?n.parse(r.get()):r.get(),velocity:r.getVelocity(),to:n?n.parse(t):t,type:n}},resolveTarget:function(e,t){var r=e.type;return r?r.parse(t):t},selectValueToRead:function(e){return e.raw},startAction:function(e,t,r){var n=e.raw,o=e.type,a={update:function(e){return n.update(e)},complete:r};return o?t.pipe(o.transform).start(a):t.start(a)},stopAction:function(e){return e.stop()},getInstantTransition:function(e,t){return Ze(t)},addActionDelay:function(e,t){return void 0===e&&(e=0),ye(be(e),t)},defaultTransitions:We,transformPose:Bt,readValueFromSource:qt,extendAPI:Zt}));e.default=function(e,t){return Nt(Ht(e,t))},Object.defineProperty(e,"__esModule",{value:!0})});
